<div class="display-ingredients-container">
  <div class="header">
    <h2>æ‰€æœ‰æˆåˆ†</h2>
    <div class="header-actions">
      <span class="total-count" *ngIf="!isLoading && !error">
        ç¸½è¨ˆ: {{ totalIngredients }} æˆåˆ†
      </span>
      <button 
        type="button" 
        class="btn-refresh"
        (click)="refreshIngredients()"
        [disabled]="isLoading"
      >
        <span *ngIf="!isLoading">é‡æ–°æ•´ç†</span>
        <span *ngIf="isLoading">è¼‰å…¥ä¸­...</span>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>æ­£åœ¨è¼‰å…¥é£Ÿæ...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-state">
    <div class="error-icon">âŒ</div>
    <p class="error-message">{{ error }}</p>
    <button type="button" class="btn-retry" (click)="refreshIngredients()">
      å†è©¦ä¸€æ¬¡
    </button>
  </div>

  <!-- Ingredients Grid with Pagination -->
  <div *ngIf="!isLoading && !error && ingredients.length > 0" class="ingredients-grid-container">
    <!-- Current Page Info -->
    <div class="page-info">
      <span class="page-indicator">
        ç¬¬ {{ currentPage }} é ï¼Œå…± {{ totalPages }} é 
      </span>
    </div>

    <!-- Ingredients Grid using app-ingredients-card -->
    <div class="ingredients-grid">
      <app-ingredients-card 
        *ngFor="let ingredient of paginatedIngredients; trackBy: trackByIngredientId"
        [ingredient]="ingredient"
        class="ingredient-item-wrapper"
      >
      </app-ingredients-card>
    </div>

    <!-- Pagination Controls -->
    <div class="pagination-container">
      <div class="pagination-info">
        <span>
          é¡¯ç¤º {{ paginatedIngredients.length }} / {{ totalIngredients }} æˆåˆ†
        </span>
      </div>
      
      <div class="pagination-controls">
        <div class="nav-buttons">
          <button 
            type="button"
            class="btn-page btn-first"
            [disabled]="currentPage === 1"
            (click)="goToFirstPage()"
            title="First Page"
          >
            <<
          </button>
          
          <button 
            type="button"
            class="btn-page btn-prev"
            [disabled]="currentPage === 1"
            (click)="goToPreviousPage()"
            title="Previous Page"
          >
            <
          </button>
        </div>
        
        <div class="page-numbers">
          <button
            *ngFor="let page of getVisiblePages()"
            type="button"
            class="btn-page-number"
            [class.active]="page === currentPage"
            [class.ellipsis]="page === '...'"
            [disabled]="page === '...'"
            (click)="goToPage(page)"
            [title]="page === '...' ? '' : 'Go to page ' + page"
          >
            {{ page }}
          </button>
        </div>
        
        <div class="nav-buttons">
          <button 
            type="button"
            class="btn-page btn-next"
            [disabled]="currentPage === totalPages"
            (click)="goToNextPage()"
          >
            >
          </button>
          
          <button 
            type="button"
            class="btn-page btn-last"
            [disabled]="currentPage === totalPages"
            (click)="goToLastPage()"
            title="Last Page"
          >
            >>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !error && ingredients.length === 0" class="empty-state">
    <div class="empty-icon">ğŸ¥•</div>
    <h3>æœªæ‰¾åˆ°æˆåˆ†</h3>
    <p>è³‡æ–™åº«ä¸­å°šç„¡ä»»ä½•æˆåˆ†.</p>
    <button type="button" class="btn-primary" routerLink="/add-ingredient">
      åŠ å…¥ç¬¬ä¸€å€‹é£Ÿæ
    </button>
  </div>
</div>