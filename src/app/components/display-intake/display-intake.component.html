<div class="display-intake">
  <div *ngIf="loading" class="loading">Loading segmentation results...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <ng-container *ngIf="!loading && !error && beforeResult && afterResult">
    <!-- BEFORE MEAL -->
    <div class="segment-section">
      <h3>Before Meal</h3>
      <img [src]="beforeResult.segmented_image_url" alt="Before Segmented Image">

      <p><strong>Number of classes:</strong> {{ beforeResult.num_classes }}</p>

      <ul>
        <li *ngFor="let className of beforeResult.class_names">{{ className }}</li>
      </ul>

      <p *ngIf="beforeResult.raw_weight"><strong>Raw Weight:</strong> {{ beforeResult.raw_weight }} g</p>

      <div *ngIf="beforeResult.estimated_volumes_ml" class="volumes">
        <strong>Estimated Volumes (ml):</strong>
        <div *ngFor="let key of beforeResult.class_names" class="volume-item">
          {{ key }}: {{ beforeResult.estimated_volumes_ml[key] | number:'1.0-2' }} ml
        </div>
      </div>
    </div>

    <!-- AFTER MEAL -->
    <div class="segment-section">
      <h3>After Meal</h3>
      <img [src]="afterResult.segmented_image_url" alt="After Segmented Image">

      <p><strong>Number of classes:</strong> {{ afterResult.num_classes }}</p>

      <ul>
        <li *ngFor="let className of afterResult.class_names">{{ className }}</li>
      </ul>

      <p *ngIf="afterResult.raw_weight"><strong>Raw Weight:</strong> {{ afterResult.raw_weight }} g</p>

      <div *ngIf="afterResult.estimated_volumes_ml" class="volumes">
        <strong>Estimated Volumes (ml):</strong>
        <div *ngFor="let key of afterResult.class_names" class="volume-item">
          {{ key }}: {{ afterResult.estimated_volumes_ml[key] | number:'1.0-2' }} ml
        </div>
      </div>
    </div>
  </ng-container>
</div>
